<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="animation.css">
    <link rel="stylesheet" href="css/pcb.css">
    <link rel="stylesheet" href="css/code.css">
    <link rel="stylesheet" href="css/schematic.css">
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" href="css/easter_egg.css">
    <link rel="stylesheet" href="css/model.css">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="testDir/robot.css">
    <script src=" https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js "></script>
    <title>Messinalbot</title>
    <link rel="stylesheet" href="css/prettyfy.css">

    
</head>

<body id="body">

    <div class="loaderContainer" id="loader">
        <span class="loader" id=""></span>
    </div>
    
    <header id="header">
          <!--? Bar Icon-->

            <!--? ¿Lol? -->
            <button class="easterEgg" id="easterEggBtn">
                <img class="egg" src="icons/easter-egg.png" alt="">
            </button>
            <div class="eggDiv" id="easterEggLi">
                <li class="eggLi ">
                    <button class="eggInBtn" id="botonUno">
                        <i class="bi bi-question-square eggI"></i>
                    </button>
                </li>
                
                <li class="eggLi" >
                    <button class="eggInBtn">
                        <img class="eggImg" src="icons/testIcon.svg" alt="">
                    </button>
                </li>
                <li class="eggLi" >
                    <button class="eggInBtn">
                        <img class="eggImg" src="icons/testIcon.svg" alt="">
                    </button>
                </li>

            </div>
     
         <!--? End-->    
        
         <div class="bodynot" id="lol">
            <div class="sphereCont">
                <div class="sphere one"></div>
                <div class="sphere two"></div>
                <div class="sphere three"></div>
            </div>
            <div class="head">
                <div class="face">
        
                    <!--? Parte Superior de la Cara-->
                    <!--Se Compone de ojos nada más-->
        
                    <div class="topBox">
                        <div class="leftEye"></div>
                        <div class="rightEye"></div>
                    </div>
        
                    <!--?Parte Inferior de la Cara-->
                    <!--Se Compone de la boca y mejillas-->
        
                    <div class="bottomBox">
                        <div class="thingOne"></div>
                        <div class="mouth"></div>
                        <div class="thingTwo"></div>
                    </div>
                </div>
            </div>
            <div class="body">
                <div class="neck"></div>
                
            </div>
            
            <h3 class="robotitoText">- Messinalbot -</h3>
        </div>
               
    </header>

    <!--?   Fin Primer Viewport-->
    <main class="main">
    <!--?   Barra de Navegación-->
        <nav class="mainBoxNav" id="nav">

          

            <ul class="boxList">
                
 

                <li class="homeLol">  
                    <a href="#Home" class="aTablet">     <!--!HOME-->
                        <img class="listIcon v0" src="icons/home.png" alt="">
                    </a> 
                    <a class="V0 True" href="#Home">Home</a>
                </li>

                <li>                        <!--!PCB--> 
                    
                    <a href="#PCB" class="aTablet">
                        <img src="icons/pcb.png" alt="" class="listIcon v1">
                    </a>
                        
                    <a class="V1" href="#PCB">PCB</a>
                </li>

                <li>                        <!--!SCHEMATIC-->
                    <a href="#Schematic" class="aTablet">
                        <img src="icons/schematic.png" alt="" class="listIcon v2" >
                    </a>
                    
                    <a class="V2" href="#Schematic">Schematic</a>
                </li>

                <li>        
                                            <!--!CODE-->
                    <a href="#Code" class="aTablet">
                        <img src="icons/code.png" alt="" class="listIcon v3">
                    </a>

                    <a class="V3" href="#Code">Code</a>
                </li>

                <li>                        <!--!APP-->
                    <a href="#App" class="aTablet">
                        <img src="icons/app.png" alt="" class="listIcon v4">
                    </a>
                    
                    <a class="V4" href="#App">APP</a>
                </li>

                <li>                        <!--!3D MODEL-->

                    <a href="" class="aTablet">
                        <img src="icons/3dModel.png" alt="" class="listIcon v5">
                    </a>
                    <a class="V5" href="#">3D Model <br>(+)</a>
                </li>
            </ul>
        </nav>
    <!--?    End/-->
        <section class="mainBoxSection">
            
    <!-- TODO: INICIO HOME VIEWPORT-->

            <article class="mainArticlePresentate" id="Home"> 

                <h2 class="title">
                    <span class="virguililla"> < </span>
                    Cristionel <span class="and">|</span> <span class="lineaDelete"><hr></span> Messinaldo
                    <span class="virguililla">></span>
                </h2>

                    <hr class="cosito">

                <div class="contentBox">
                    <hr class="hrOne">
                    
                    <p>
                        Proyecto preparado para los alumnos de 4to año de Electrónica y diseñado para competir en la Liga Nacional de Robotica como robot Futbolista            

                        <br>

                        El mismo también tiene una integración apta para ser un sumo; sin embargo, no tiene un código implementado para ello.
                    </p>
                    <hr class="hrTwo">
                </div>
                    

            </article>

    <!-- TODO: INICIO PCB VIEWPORT-->
           
            <article class="pcbArticle" id="PCB">
                    <div class="boxFirst">
                        <h3 class="pcbTitle">PCB - Robot</h3>
                        <p class="pcbText" >Circuito con sensores infrarrojos y de ultrasonido, botón de encendido, y la capacidad de controlar dos motores. A más detalles de su funcionamiento leer la documentación respectiva en el repositorio de Github del proyecto.</p>

                  
                    </div>
                    
                    <div class="boxSecond">
                       <picture class="imgContainer">
                            <img class="pcbImg" src="img/PCB-IMG.png"  alt="">

                            <div class="download">
                                <a class="downloadA" href="https://github.com/Sartalan/Spectrum-Messinalbot" target="_blank">
                                    <p class="downloadText">
                                        Download
                                    </p>
                                                     

                                     <i class="downloadIcon">
                                        <img src="icons/github-mark-white.png" alt="Github Icon">
                                    </i>
                                </a>                                
                            </div>

                        </picture>
                            <!--? MOBILE DOWNLOAD BUTTOM-->
                   
                        <a href="https://github.com/Sartalan/Spectrum-Messinalbot" target="_blank" class="mobButtomContainer">
                            <p>
                                Download
                            </p>
                                <img class="mobIcon" src="icons/github-mark-white.png" alt="GithubIcon">

                        </a>
               
                        <!--? END OF THE MOBILE DOWNLOAD BUTTOM-->
                                    

                        <hr class="hrBetween">

                        <ul class="pcbUl">
                            <ol class="olComponents List">Componentes:</ol>  <!-- *Title-->


                            <li class="olComponents"><a class="aShop" href="https://components101.com/modules/drv8833-dual-h-bridge-motor-driver-module" target="_blank">Puente H: DRV8833</a>
                                <span class="linea 1"></span>
                            </li>
                                
                            <li class="olComponents"><a class="aShop" href="https://randomnerdtutorials.com/esp32-pinout-reference-gpios/" target="_blank" >Microcontrolador: ESP32</a>
                                <span class="linea 2"></span>
                            </li>
                                
                            <li class="olComponents"><a class="aShop" href="https://pdf1.alldatasheet.es/datasheet-pdf/view/1132203/ETC2/HC-SR04.html" target="_blank" >S. Ultrasonido: HC-SR05 (2) </a>
                                <span class="linea 3"></span>
                            </li>
                                
                            <li class="olComponents"><a class="aShop" href="https://www.vishay.com/docs/83751/cny70.pdf" target="_blank" >S. Infrarrojo: CNY70 (2)</a>
                                <span class="linea 4"></span>
                            </li>
                                
                            <li class="olComponents"><a class="aShop" href="https://ferretronica.com/products/motorreductor-amarillo-plastico-con-llanta-1-kg-cm-5v" target="_blank">Motores Amarillos (2)</a>
                                <span class="linea 5"></span>
                            </li>
                              
                              
                            <li class="olComponents"><a class="aShop" href="https://www.youtube.com/watch?v=hs5oLYiB2Cg">Wire</a>
                                <span class="linea 7"></span>
                            </li>   
                                
                            <hr class="hrOl">
                        </ul>
                    </div>
      
            </article>

    <!-- TODO: INICIO SCHEMATIC VIEWPORT-->

     <article class="schematicArticle" id="Schematic">

            <div class="nisequecarajoponerleaestamrd">
                <h3 class="schTitle">Schematic</h3>
                <hr class="schCosito">
            </div>
            
        <div class="wrapper">
            <i id="left" class="fa-solid fa-angle-left"></i>

            <div class="carousel">
              <img src="img/schematicPics/one.png" alt="img" draggable="false">
              <img src="img/schematicPics/two.png" alt="img" draggable="false">
              <img src="img/schematicPics/three.png" alt="img" draggable="false">
              <img src="img/schematicPics/four.png" alt="img" draggable="false">
              <img src="img/schematicPics/five.png" alt="img" draggable="false">
              <img src="img/schematicPics/six.png" alt="img" draggable="false">


              
          
            </div>

            <i id="right" class="fa-solid fa-angle-right"></i>
          </div>
     </article>
    
     <!-- TODO: INICIO CODE VIEWPORT-->

     <article class="codeArticle" id="Code">
        <h3 class="codeText" >Bluetooth .1</h3>
      
    
       
        
        <pre class="prettyprint   pre"><code class="language-c">

                #include "BluetoothSerial.h"
    #if !defined(CONFIG_BT_ENABLED) || !defined(CONFIG_BLUEDROID_ENABLED)
    #error Bluetooth is not enabled! Please run `make menuconfig` to and enable it
    #endif

    #define Motor1a 16
    #define Motor1b 17
    #define Motor2a 18
    #define Motor2b 19
    int veloc;
    BluetoothSerial BT; // Objeto Bluetooth

    void callback_function(esp_spp_cb_event_t event, esp_spp_cb_param_t *param) {
    if (event == ESP_SPP_START_EVT) {
        Serial.println("Inicializado SPP");
    }

    else if (event == ESP_SPP_SRV_OPEN_EVT ) {
        Serial.println("Cliente conectado");
    }

    else if (event == ESP_SPP_CLOSE_EVT  ) {
        Serial.println("Cliente desconectado");
    }

    else if (event == ESP_SPP_DATA_IND_EVT ) {
        Serial.println("Datos recibidos");
        while (BT.available()) { // Mientras haya datos por recibir
        int incoming = BT.read(); // Lee un byte de los datos recibidos
        }
    }
    }

    void setup() {
            Serial.begin(115200); // Inicializando la conexión serial para debug
        BT.begin("ESP32_Fulbo"); // Nombre de tu Dispositivo Bluetooth y en modo esclavo
        Serial.println("El dispositivo Bluetooth está listo para emparejar");
        BT.register_callback(callback_function); // Registramos la función "callback_function" como función callback.

        pinMode(Motor1a, OUTPUT);
        pinMode(Motor1b, OUTPUT);
        pinMode(Motor2a, OUTPUT);
        pinMode(Motor2b, OUTPUT);
    }
    void loop() {
    if (BT.available()) // Compruebe si recibimos algo de Bluetooth
    {
        int incoming = BT.read(); // Lee lo que recibimos
        Serial.print("Recibido: ");
        Serial.println(incoming);
        
        switch(incoming){
        case 70: // F en ASCII
        Adelante() ; 
            Serial.print("Adelante");
        break;
        case 66: // B en ASCII
        Retroceder();
        Serial.print("Retroceder");
        break;
        case 76: // L en ASCII
        Izquierda();
        Serial.print("Izquierda"); 
        break;
        case 82: // R en ASCII
        Derecha();
        Serial.print("Derecha");
        break;
        case 0: // 0 en ASCII
        veloc = 0;
        break;
        case 1: // 1 en ASCII
        veloc = 25; 
        break;
        case 2: // 2 en ASCII
        veloc = 51;
        break;
        case 3: // 3 en ASCII
        veloc = 76;
        break;
        case 4: // 4 en ASCII
        veloc = 102;
        break;
        case 5: // 5 en ASCII
        veloc = 127;
        break;
        case 6: // 6 en ASCII
        veloc = 153;
        break;
        case 7: // 7 en ASCII
        veloc = 179;
        break;
        case 8: // 8 en ASCII
        veloc = 200;
        break;
        case 9: // 9 en ASCII
        veloc = 225;
        break;
        case 113: // q en ASCII
        veloc = 255;
        break;
        default:
            Parar(); 
            Serial.print("Parado");
        break;
        }
    }
    }
    void Adelante() {

    digitalWrite(Motor1a, veloc);
    digitalWrite(Motor1b, LOW);
    digitalWrite(Motor2a, veloc);
    digitalWrite(Motor2b, LOW);


    }
    void Retroceder() {

    digitalWrite(Motor1a, LOW);
    digitalWrite(Motor1b, HIGH);
    digitalWrite(Motor2a, LOW);
    digitalWrite(Motor2b, HIGH);

    }
    void Izquierda() {

    digitalWrite(Motor1a, LOW);
    digitalWrite(Motor1b, HIGH);
    digitalWrite(Motor2a, HIGH);
    digitalWrite(Motor2b, LOW);

    }
    void Derecha() {

    digitalWrite(Motor1a, HIGH);
    digitalWrite(Motor1b, LOW);
    digitalWrite(Motor2a, LOW);
    digitalWrite(Motor2b, HIGH);

    }
    void Parar() {
    digitalWrite(Motor1a, LOW);
    digitalWrite(Motor1b, LOW);
    digitalWrite(Motor2a, LOW);
    digitalWrite(Motor2b, LOW);
    }
        </code></pre>

    <hr class="hrCode">
  
     </article>

     <div class="code-wifi">
        <h3 class="codeText">Wifi .2</h3>
        <pre class="prettyprint pre-class pre">
            <code class="language-c code-class">
                
// Import required libraries
#include < WiFi.h >
#include < AsyncTCP.h >
#include < ESPAsyncWebServer.h >


// Replace with your network credentials
const char* ssid = "Polenta3000";
const char* password = "Tecnica5";

//Estudiantes
//educar_2018
int Numero;

#define STBY 5
#define Motor1a 17
#define Motor1b 16
#define Motor2a 18
#define Motor2b 19

char move = 'default';
int ledState = 0;
bool getA, getS, getD, getW = 0;

// Create AsyncWebServer object on port 80
AsyncWebServer server(80);
AsyncWebSocket ws("/ws");

const char index_html[] PROGMEM = R"rawliteral(
            // Aquí se inserta la Página Web
)rawliteral";

void notifyClients() {
  ws.textAll(String(ledState));
}

void handleWebSocketMessage(void *arg, uint8_t *data, size_t len) {
  AwsFrameInfo *info = (AwsFrameInfo*)arg;
  if (info->final && info->index == 0 && info->len == len && info->opcode == WS_TEXT) {
    data[len] = 0;

//----------------

    if (strcmp((char*)data, "IZQUIERDA") == 0) {

      Serial.println("Voy hacia la izquierda");
      move = 'A';
      getA = 0;
      
    } if (strcmp((char*)data, "DERECHA") == 0) {

       Serial.println("Voy hacia la derecha");
      move = 'D';
      getD = 0;

    }
    if (strcmp((char*)data, "ABAJO") == 0) {

      Serial.println("Voy hacia abajo");
      move = 'S';
      getS = 0;
       
    }

    if (strcmp((char*)data, "ARRIBA") == 0) {
      
      Serial.println("Voy hacia adelante");
      move = 'W';
      getA = 0;
    }

    //-------------- MENOS

    if (strcmp((char*)data, "MENOSARRIBA") == 0) {
        move = 'default';
    }
     if (strcmp((char*)data, "MENOSDERECHA") == 0) {
        move = 'default'; 
    }
     if (strcmp((char*)data, "MENOSIZQUIERDA") == 0) {
        move = 'default';
    }
     if (strcmp((char*)data, "MENOSABAJO") == 0) {
        move = 'default';
    }

    

  }
}

void onEvent(AsyncWebSocket *server, AsyncWebSocketClient *client, AwsEventType type,
             void *arg, uint8_t *data, size_t len) {
  switch (type) {
    case WS_EVT_CONNECT:
      Serial.printf("WebSocket client #%u connected from %s\n", client->id(), client->remoteIP().toString().c_str());
      break;
    case WS_EVT_DISCONNECT:
      Serial.printf("WebSocket client #%u disconnected\n", client->id());
      break;
    case WS_EVT_DATA:
      handleWebSocketMessage(arg, data, len);
      break;
    case WS_EVT_PONG:
    case WS_EVT_ERROR:
      break;
  }
}

void initWebSocket() {
  ws.onEvent(onEvent);
  server.addHandler(&ws);
}

String processor(const String& var){
  Serial.println(var);
  if(var == "STATE"){
    if (ledState){
      return "ON";
    }
    else{
      return "OFF";
    }
  }
  return String();
}

void setup(){
  // Serial port for debugging purposes
  Serial.begin(115200);

  pinMode(Motor1a, OUTPUT);
  pinMode(Motor1b, OUTPUT);
  pinMode(Motor2a, OUTPUT);
  pinMode(Motor2b, OUTPUT);

  digitalWrite(Motor1a, LOW);
  digitalWrite(Motor1b, LOW);
  digitalWrite(Motor2a, LOW);
  digitalWrite(Motor2b, LOW);
  
  // Connect to Wi-Fi
  WiFi.begin(ssid, password);
  while (WiFi.status() != WL_CONNECTED) {
    delay(1000);
    Serial.println("Connecting to WiFi..");
  }

  // Print ESP Local IP Address
  Serial.println(WiFi.localIP());

  initWebSocket();

  // Route for root / web page
  server.on("/", HTTP_GET, [](AsyncWebServerRequest *request){
    request->send_P(200, "text/html", index_html, processor);
  });

  // Start server
  server.begin();
}

void loop() {
  ws.cleanupClients();

 switch (move)
{


  case 'A':
        
          Serial.println("A");
          digitalWrite(Motor1a, HIGH);
          digitalWrite(Motor1b, LOW);
          digitalWrite(Motor2a, LOW);
          digitalWrite(Motor2b, HIGH);
          digitalWrite(STBY, HIGH);
          
        
        break;

  case 'D':
          
          Serial.println("D");
          digitalWrite(Motor1a, LOW);
          digitalWrite(Motor1b, HIGH);
          digitalWrite(Motor2a, HIGH);
          digitalWrite(Motor2b, LOW);
          digitalWrite(STBY, HIGH);

        break;
  case 'W':

        
          Serial.println("W");
          digitalWrite(Motor1a, HIGH);
          digitalWrite(Motor1b, LOW);
          digitalWrite(Motor2a, HIGH);
          digitalWrite(Motor2b, LOW);
          digitalWrite(STBY, HIGH);
          

        break;

  case 'S':

        
          Serial.println("S");
          digitalWrite(Motor1a, LOW);
          digitalWrite(Motor1b, HIGH);
          digitalWrite(Motor2a, LOW);
          digitalWrite(Motor2b, HIGH);
          digitalWrite(STBY, HIGH);
          
        
        break;

    default:

        
        digitalWrite(Motor1a, LOW);
        digitalWrite(Motor1b, LOW);
        digitalWrite(Motor2a, LOW);
        digitalWrite(Motor2b, LOW);
        digitalWrite(STBY, LOW);
        break;
}
}
            </code>
        </pre>
        <hr class="hrCode">
    </div>


     <!-- TODO: INICIO APP VIEWPORT-->

     <article class="appArticle" id="App">
        <div class="leftApp">
         <div class="nothingBox"></div>
 
         <div class="dawdw">
             <a href="https://play.google.com/store/apps/details?id=braulio.calle.bluetoothRCcontroller&hl=es_AR&gl=US" class="linkApp">
             <img src="img/playstore.jpg" class="toDeleteOnMobile" alt="">
             <img src="img/google-play-badge (1).png" class="toDeleteOnPc" alt="">
             <hr>
             
         </a>
         </div>
        </div>
 
         <picture class="rightApp">
             <h2 class="app-title-style">App Bluetooth .1</h2>
             <img src="img/appImg.png" class="toDeleteOnMobile" alt="">
             <img src="img/appImgMobile.png" alt="" class="toDeleteOnPc">
         </picture>
 
      </article>

      <div class="app-article-wifi">
        <h2 class="app-title-style">Control Wifi .2</h2>

        <a href="control/control.html" target="_blank" class="button-31 control-wifi-link" role="button"> Redirigir al Control Wifi </a>

      </div>

      

       <!-- TODO: INICIO MODEL VIEWPORT-->

      <article class="modelArticle" id="model">

        <script type="module" src="model.js"></script>

      </article>


        </section>


        <script src="main.js"></script>



</body>

</html>

